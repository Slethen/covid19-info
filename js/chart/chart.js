am4core.ready(function(){am4core.useTheme(am4themes_animated),am4core.options.queue=!0,am4core.options.onlyShowOnViewport=!0,am4core.ready(function(){for(var e,t,a,o,i,r,n=new am4core.NumberFormatter,l=am4core.color("#1e2128"),d=am4core.color("#ff8726"),c=am4core.color("#1c5fe5"),s=am4core.color("#45d21a"),m=am4core.color("#d21a1a"),f={active:d,confirmed:c,recovered:s,deaths:m},p=am4core.color("#3b3b3b"),u=am4core.color("#000000"),v=am4core.color("#ffffff"),g=am4core.color("#1b1b1b"),h=am4core.color("#0f0f0f"),b="World",C=new Date(covid_total_timeline[covid_total_timeline.length-1].date),y=C,x=!1,I={},k=covid_world_timeline[covid_world_timeline.length-1].list,S=0;S<k.length;S++){var w=k[S];I[w.id]=S}for(S=0;S<covid_total_timeline.length;S++){(G=covid_total_timeline[S]).active=G.confirmed-G.recovered}function O(e){return null==e&&(e=covid_world_timeline.length-1),covid_world_timeline[e]}var T=O(),P=JSON.parse(JSON.stringify(T.list));for(S=P.length-1;S>=0;S--)0==P[S].confirmed&&P.splice(S,1);var L={confirmed:0,recovered:0,deaths:0},A={confirmed:0,recovered:0,deaths:0,active:0};for(S=0;S<P.length;S++){var G;(G=P[S]).confirmed>L.confirmed&&(L.confirmed=G.confirmed),G.recovered>L.recovered&&(L.recovered=G.recovered),G.deaths>L.deaths&&(L.deaths=G.deaths),L.active=L.confirmed}var M=am4core.create("chartdiv",am4core.Container);M.width=am4core.percent(100),M.height=am4core.percent(100),M.tooltip=new am4core.Tooltip,M.tooltip.background.fill=am4core.color("#000000"),M.tooltip.background.stroke=d,M.tooltip.fontSize="0.9em",M.tooltip.getFillFromObject=!1,M.tooltip.getStrokeFromObject=!1;var B=M.createChild(am4maps.MapChart);B.height=am4core.percent(80),B.zoomControl=new am4maps.ZoomControl,B.zoomControl.align="right",B.zoomControl.marginRight=15,B.zoomControl.valign="middle",B.homeGeoPoint={longitude:0,latitude:-2},B.zoomControl.minusButton.events.on("hit",Oe),B.seriesContainer.background.events.on("hit",Oe),B.seriesContainer.background.events.on("over",Ae),B.seriesContainer.background.fillOpacity=0,B.zoomEasing=am4core.ease.sinOut,B.geodata=am4geodata_worldLow,B.projection=new am4maps.projections.Miller,B.panBehavior="move",B.backgroundSeries.mapPolygons.template.polygon.fillOpacity=.05,B.backgroundSeries.mapPolygons.template.polygon.fill=am4core.color("#ffffff"),B.backgroundSeries.hidden=!0;var R=B.series.push(new am4maps.MapPolygonSeries);R.dataFields.id="id",R.dataFields.value="confirmedPC",R.interpolationDuration=0,R.exclude=["AQ"],R.useGeodata=!0,R.nonScalingStroke=!0,R.strokeWidth=.5,R.calculateVisualCenter=!0,R.data=P;var F=R.mapPolygons.template;F.fill=p,F.fillOpacity=1,F.stroke=u,F.strokeOpacity=.15,F.setStateOnChildren=!0,F.tooltipPosition="fixed",F.events.on("hit",function(e){ye(e.target)}),F.events.on("over",function(e){Ie(e.target)}),F.events.on("out",function(e){ke(e.target)}),R.heatRules.push({target:F,property:"fill",min:p,max:p,dataField:"value"}),B.deltaLongitude=-10;var D=F.states.create("hover");D.transitionDuration=1400,D.properties.fill=g,F.states.create("active").properties.fill=h;var N=B.series.push(new am4maps.MapImageSeries);N.data=JSON.parse(JSON.stringify(P)),N.dataFields.value="confirmed",N.dataFields.id="id",N.tooltip.animationDuration=0,N.tooltip.showInViewport=!1,N.tooltip.background.fillOpacity=.2,N.tooltip.getStrokeFromObject=!0,N.tooltip.getFillFromObject=!1,N.tooltip.background.fillOpacity=.2,N.tooltip.background.fill=am4core.color("#000000");var z=N.mapImages.template;z.nonScaling=!0,z.strokeOpacity=0,z.fillOpacity=.55,z.tooltipText="{name}: [bold]{value}[/]",z.applyOnClones=!0,z.events.on("over",function(e){Ie(R.getPolygonById(e.target.dataItem.id))}),z.events.on("out",function(e){ke(R.getPolygonById(e.target.dataItem.id))}),z.events.on("hit",function(e){ye(R.getPolygonById(e.target.dataItem.id))}),z.adapter.add("tooltipY",function(e,t){return-t.children.getIndex(0).radius}),z.states.create("hover").properties.fillOpacity=1;var H=z.createChild(am4core.Circle);H.hiddenState.properties.scale=1e-4,H.hiddenState.transitionDuration=2e3,H.defaultState.transitionDuration=2e3,H.defaultState.transitionEasing=am4core.ease.elasticOut,H.applyOnClones=!0,N.heatRules.push({target:H,property:"radius",min:3,max:30,dataField:"value"}),N.events.on("dataitemsvalidated",function(){N.dataItems.each(e=>{var t=e.mapImage,a=t.children.getIndex(0);0==t.dataItem.value?a.hide(0):(a.isHidden||a.isHiding)&&a.show()})}),z.adapter.add("latitude",function(e,t){var a=R.getPolygonById(t.dataItem.id);return a?(t.disabled=!1,a.visualLatitude):(t.disabled=!0,e)}),z.adapter.add("longitude",function(e,t){var a=R.getPolygonById(t.dataItem.id);return a?(t.disabled=!1,a.visualLongitude):(t.disabled=!0,e)});var _=B.titles.create();_.fontSize="1.5em",_.text="COVID-19 Global Data",_.align="left",_.horizontalCenter="left",_.marginLeft=20,_.paddingBottom=10,_.fill=am4core.color("#ffffff"),_.y=20;var V=B.createChild(am4core.SwitchButton);V.align="right",V.y=15,V.leftLabel.text="Map",V.leftLabel.fill=am4core.color("#ffffff"),V.rightLabel.fill=am4core.color("#ffffff"),V.rightLabel.text="Globe",V.verticalCenter="top",V.events.on("toggled",function(){V.isActive?(B.projection=new am4maps.projections.Orthographic,B.backgroundSeries.show(),B.panBehavior="rotateLongLat",R.exclude=[]):(B.projection=new am4maps.projections.Miller,B.backgroundSeries.hide(),B.panBehavior="move",function(e){for(var t=e.length-1;t>=0;t--)"AQ"==e[t].id&&e.splice(t,1)}(P),R.data=P,R.exclude=["AQ"])});var E=B.createChild(am4core.SwitchButton);E.align="center",E.y=15,E.leftLabel.text="Absolute",E.leftLabel.fill=am4core.color("#ffffff"),E.rightLabel.fill=am4core.color("#ffffff"),E.rightLabel.text="Per Capita",E.rightLabel.interactionsEnabled=!0,E.rightLabel.tooltipText="When calculating max value, countries with population less than 100.000 are not included.",E.verticalCenter="top",E.events.on("toggled",function(){E.isActive?(N.hide(0),x=!0,N.interpolationDuration=0,R.heatRules.getIndex(0).max=f[o],R.heatRules.getIndex(0).maxValue=A[o],R.mapPolygons.template.applyOnClones=!0,Q.hide(),$.hide(),q.hide(),ee.hide(),Ge()):(x=!1,R.interpolationDuration=0,N.interpolationDuration=1e3,N.show(),R.heatRules.getIndex(0).max=p,R.mapPolygons.template.tooltipText=void 0,Q.show(),$.show(),q.show(),ee.show()),R.mapPolygons.each(function(e){e.fill=e.fill,e.defaultState.properties.fill=void 0})});var K=M.createChild(am4core.Container);K.layout="vertical",K.height=am4core.percent(45),K.width=am4core.percent(100),K.valign="bottom";var W=K.createChild(am4core.Container);W.width=am4core.percent(100),W.padding(0,10,5,20),W.layout="horizontal";var Y=W.createChild(am4core.Label);Y.fontSize="1.1em",Y.fill=am4core.color("#ffffff"),Y.valign="middle";var U=W.createChild(am4core.Container);U.layout="grid",U.width=am4core.percent(100),U.x=10,U.contentAlign="right";var j=K.createChild(am4core.Container);j.layout="vertical",j.height=am4core.percent(100),j.width=am4core.percent(100),j.background=new am4core.RoundedRectangle,j.background.fill=am4core.color("#000000"),j.background.cornerRadius(30,30,0,0),j.background.fillOpacity=.25,j.paddingTop=12,j.paddingBottom=0;var Z=j.createChild(am4core.Container);Z.width=am4core.percent(100),Z.padding(0,15,15,10),Z.layout="horizontal";var J=Z.createChild(am4core.Slider);J.width=am4core.percent(100),J.valign="middle",J.background.opacity=.4,J.opacity=.7,J.background.fill=am4core.color("#ffffff"),J.marginLeft=20,J.marginRight=35,J.height=15,J.start=1,J.events.on("rangechanged",function(e){var t=Math.round((covid_world_timeline.length-1)*J.start);!function(e){N.dataItems.each(function(e){e.dataContext.confirmed=0,e.dataContext.deaths=0,e.dataContext.recovered=0,e.dataContext.active=0}),A={active:0,confirmed:0,deaths:0,recovered:0};for(var t=0;t<e.length;t++){var a=e[t],i=N.getImageById(a.id),r=R.getPolygonById(a.id);if(i){var n=Number(Me[i.dataItem.dataContext.id]);i.dataItem.dataContext.confirmed=a.confirmed,i.dataItem.dataContext.deaths=a.deaths,i.dataItem.dataContext.recovered=a.recovered,i.dataItem.dataContext.active=a.confirmed-a.recovered-a.deaths}r&&(r.dataItem.dataContext.confirmedPC=a.confirmed/n*1e6,r.dataItem.dataContext.deathsPC=a.deaths/n*1e6,r.dataItem.dataContext.recoveredPC=a.recovered/n*1e6,r.dataItem.dataContext.active=a.confirmed-a.recovered-a.deaths,r.dataItem.dataContext.activePC=r.dataItem.dataContext.active/n*1e6,n>1e5&&(r.dataItem.dataContext.confirmedPC>A.confirmed&&(A.confirmed=r.dataItem.dataContext.confirmedPC),r.dataItem.dataContext.deathsPC>A.deaths&&(A.deaths=r.dataItem.dataContext.deathsPC),r.dataItem.dataContext.recoveredPC>A.recovered&&(A.recovered=r.dataItem.dataContext.recoveredPC),r.dataItem.dataContext.activePC>A.active&&(A.active=r.dataItem.dataContext.activePC))),N.heatRules.getIndex(0).maxValue=L[o],R.heatRules.getIndex(0).maxValue=A[o],N.invalidateRawData(),R.invalidateRawData()}}(O(t).list),Pe(t)}),J.startGrip.events.on("drag",()=>{te(),r&&r.setProgress(J.start)});var X=Z.createChild(am4core.PlayButton);X.valign="middle",X.events.on("toggled",function(e){e.target.isActive?function(){r||(r=J.animate({property:"start",to:1,from:0},5e4,am4core.ease.linear).pause()).events.on("animationended",()=>{X.isActive=!1});J.start>=1&&(J.start=0,r.start());r.resume(),X.isActive=!0}():te()}),J.startGrip.background.fill=X.background.fill,J.startGrip.background.strokeOpacity=0,J.startGrip.icon.stroke=am4core.color("#ffffff"),J.startGrip.background.states.copyFrom(X.background.states);var Q=M.createChild(am4core.Slider);Q.orientation="vertical",Q.height=am4core.percent(12),Q.marginLeft=25,Q.align="left",Q.valign="top",Q.verticalCenter="middle",Q.opacity=.7,Q.background.fill=am4core.color("#ffffff"),Q.adapter.add("y",function(e,t){return M.pixelHeight*(1-K.percentHeight/100)*.25}),Q.startGrip.background.fill=d,Q.startGrip.background.fillOpacity=.8,Q.startGrip.background.strokeOpacity=0,Q.startGrip.icon.stroke=am4core.color("#ffffff"),Q.startGrip.background.states.getKey("hover").properties.fill=d,Q.startGrip.background.states.getKey("down").properties.fill=d,Q.horizontalCenter="middle",Q.events.on("rangechanged",function(){Q.startGrip.scale=.75+Q.start,N.heatRules.getIndex(0).max=30+100*Q.start,H.clones.each(function(e){e.radius=e.radius})});var q=M.createChild(am4core.Label);q.text="max bubble size *",q.fill=am4core.color("#ffffff"),q.rotation=90,q.fontSize="10px",q.fillOpacity=.5,q.horizontalCenter="middle",q.align="left",q.paddingBottom=40,q.tooltip.setBounds({x:0,y:0,width:2e5,height:2e5}),q.tooltip.label.wrap=!0,q.tooltip.label.maxWidth=300,q.tooltipText="Some countries have so many cases that bubbles for countries with smaller values often look the same even if there is a significant difference between them. This slider can be used to increase maximum size of a bubble so that when you zoom in to a region with relatively small values you could compare them anyway.",q.fill=am4core.color("#ffffff"),q.adapter.add("y",function(e,t){return M.pixelHeight*(1-K.percentHeight/100)*.25});var $=M.createChild(am4core.Slider);$.orientation="vertical",$.height=am4core.percent(28),$.marginLeft=25,$.align="left",$.valign="top",$.verticalCenter="middle",$.opacity=.7,$.background.fill=am4core.color("#ffffff"),$.adapter.add("y",function(e,t){return M.pixelHeight*(1-K.percentHeight/100)*.7}),$.startGrip.background.fill=d,$.startGrip.background.fillOpacity=.8,$.startGrip.background.strokeOpacity=0,$.startGrip.icon.stroke=am4core.color("#ffffff"),$.startGrip.background.states.getKey("hover").properties.fill=d,$.startGrip.background.states.getKey("down").properties.fill=d,$.horizontalCenter="middle",$.start=1,$.events.on("rangechanged",function(){var e=L[o]*$.start+1;!isNaN(e)&&N.inited&&(N.heatRules.getIndex(0).maxValue=e,H.clones.each(function(t){t.dataItem.value>e?t.dataItem.hide():t.dataItem.show(),t.radius=t.radius}))});var ee=M.createChild(am4core.Label);function te(){r&&r.pause(),X.isActive=!1}ee.text="filter max values *",ee.rotation=90,ee.fontSize="10px",ee.fill=am4core.color("#ffffff"),ee.fontSize="0.8em",ee.fillOpacity=.5,ee.horizontalCenter="middle",ee.align="left",ee.paddingBottom=40,ee.tooltip.label.wrap=!0,ee.tooltip.label.maxWidth=300,ee.tooltipText="This filter allows to remove countries with many cases from the map so that it would be possible to compare countries with smaller number of cases.",ee.fill=am4core.color("#ffffff"),ee.adapter.add("y",function(e,t){return M.pixelHeight*(1-K.percentHeight/100)*.7});var ae=j.createChild(am4charts.XYChart);ae.fontSize="0.8em",ae.paddingRight=30,ae.paddingLeft=30,ae.maskBullets=!1,ae.zoomOutButton.disabled=!0,ae.paddingBottom=5,ae.paddingTop=3,ae.data=JSON.parse(JSON.stringify(covid_total_timeline));var oe=ae.xAxes.push(new am4charts.DateAxis);oe.renderer.minGridDistance=50,oe.renderer.grid.template.stroke=am4core.color("#000000"),oe.renderer.grid.template.strokeOpacity=.25,oe.max=C.getTime()+am4core.time.getDuration("day",5),oe.tooltip.label.fontSize="0.8em",oe.tooltip.background.fill=d,oe.tooltip.background.stroke=d,oe.renderer.labels.template.fill=am4core.color("#ffffff");var ie=ae.yAxes.push(new am4charts.ValueAxis);ie.renderer.opposite=!0,ie.interpolationDuration=3e3,ie.renderer.grid.template.stroke=am4core.color("#000000"),ie.renderer.grid.template.strokeOpacity=.25,ie.renderer.minGridDistance=30,ie.renderer.maxLabelPosition=.98,ie.renderer.baseGrid.disabled=!0,ie.tooltip.disabled=!0,ie.extraMax=.05,ie.maxPrecision=0,ie.renderer.inside=!0,ie.renderer.labels.template.verticalCenter="bottom",ie.renderer.labels.template.fill=am4core.color("#ffffff"),ie.renderer.labels.template.padding(2,2,2,2),ie.adapter.add("max",function(e,t){return e<5&&(e=5),e}),ie.adapter.add("min",function(e,t){return ne.isActive||e<0&&(e=0),e}),ae.cursor=new am4charts.XYCursor,ae.cursor.maxTooltipDistance=0,ae.cursor.behavior="none",ae.cursor.lineY.disabled=!0,ae.cursor.lineX.stroke=d,ae.cursor.xAxis=oe,am4core.getInteraction().body.events.off("down",ae.cursor.handleCursorDown,ae.cursor),am4core.getInteraction().body.events.off("up",ae.cursor.handleCursorUp,ae.cursor),ae.legend=new am4charts.Legend,ae.legend.parent=ae.plotContainer,ae.legend.labels.template.fill=am4core.color("#ffffff"),ae.legend.markers.template.height=8,ae.legend.contentAlign="left",ae.legend.fontSize="10px",ae.legend.itemContainers.template.valign="middle";var re=!1;ae.legend.itemContainers.template.events.on("down",function(){re=!0}),ae.legend.itemContainers.template.events.on("up",function(){setTimeout(function(){re=!1},100)});var ne=ae.legend.createChild(am4core.SwitchButton);ne.leftLabel.text="totals",ne.rightLabel.text="day change",ne.leftLabel.fill=am4core.color("#ffffff"),ne.rightLabel.fill=am4core.color("#ffffff"),ne.events.on("down",function(){re=!0}),ne.events.on("up",function(){setTimeout(function(){re=!1},100)}),ne.events.on("toggled",function(){if(ne.isActive){for(var e in pe||((pe={}).active=ue("active",d),pe.active.events.on("validated",function(){pe.active.columns.each(function(e){e.dataItem.values.valueY.previousChange<0?(e.fillOpacity=0,e.strokeOpacity=.6):(e.fillOpacity=.6,e.strokeOpacity=0)})}),pe.confirmed=ue("confirmed",c),pe.recovered=ue("recovered",s),pe.deaths=ue("deaths",m)),pe)pe[e].hide(0);for(var e in me)me[e].hiddenInLegend=!0,me[e].hide();pe[o].show()}else{for(var e in pe)pe[e].hiddenInLegend=!0,pe[e].hide();for(var e in me)me[e].hiddenInLegend=!1,me[e].hide();me[o].show()}});var le=fe("active",d);le.tooltip.disabled=!0,le.hidden=!1;var de=fe("confirmed",c),ce=fe("recovered",s),se=fe("deaths",m),me={active:le,confirmed:de,recovered:ce,deaths:se};function fe(e,t){var a=ae.series.push(new am4charts.LineSeries);a.dataFields.valueY=e,a.dataFields.dateX="date",a.name=Le(e),a.strokeOpacity=.6,a.stroke=t,a.fill=t,a.maskBullets=!1,a.minBulletDistance=10,a.hidden=!0,a.hideTooltipWhileZooming=!0;var o=a.bullets.push(new am4charts.CircleBullet);o.states.create("hover");o.setStateOnChildren=!0,o.circle.fillOpacity=1,o.circle.fill=l,o.circle.radius=2;var i=o.circle.states.create("hover");return i.properties.fillOpacity=1,i.properties.fill=t,i.properties.scale=1.4,a.tooltip.pointerOrientation="down",a.tooltip.getStrokeFromObject=!0,a.tooltip.getFillFromObject=!1,a.tooltip.background.fillOpacity=.2,a.tooltip.background.fill=am4core.color("#000000"),a.tooltip.dy=-4,a.tooltip.fontSize="0.8em",a.tooltipText="Total {name}: {valueY}",a}var pe;me={active:le,confirmed:de,recovered:ce,deaths:se};function ue(e,t){var a=ae.series.push(new am4charts.ColumnSeries);return a.dataFields.valueY=e,a.dataFields.valueYShow="previousChange",a.dataFields.dateX="date",a.name=Le(e),a.hidden=!0,a.stroke=t,a.fill=t,a.columns.template.fillOpacity=.6,a.columns.template.strokeOpacity=0,a.hideTooltipWhileZooming=!0,a.clustered=!1,a.hiddenInLegend=!0,a.columns.template.width=am4core.percent(50),a.tooltip.pointerOrientation="down",a.tooltip.getStrokeFromObject=!0,a.tooltip.getFillFromObject=!1,a.tooltip.background.fillOpacity=.2,a.tooltip.background.fill=am4core.color("#000000"),a.tooltip.fontSize="0.8em",a.tooltipText="{name}: {valueY.previousChange.formatNumber('+#,###|#,###|0')}",a}ae.plotContainer.events.on("up",function(){re||(J.start=ae.cursor.xPosition*((oe.max-oe.min)/(C.getTime()-oe.min)))});var ve=ae.plotContainer.createChild(am4core.Label);ve.text="Current day stats may be incomplete until countries submit their data.",ve.fill=am4core.color("#ffffff"),ve.fontSize="0.8em",ve.paddingBottom=4,ve.opacity=.5,ve.align="right",ve.horizontalCenter="right",ve.verticalCenter="bottom";var ge={active:he("active",d),confirmed:he("confirmed",c),recovered:he("recovered",s),deaths:he("deaths",m)};function he(e,t){var a=U.createChild(am4core.Button);a.label.valign="middle",a.label.fill=am4core.color("#ffffff"),a.label.fontSize="11px",a.background.cornerRadius(30,30,30,30),a.background.strokeOpacity=.3,a.background.fillOpacity=0,a.background.stroke=v,a.background.padding(2,3,2,3),a.states.create("active"),a.setStateOnChildren=!0,a.background.states.create("hoverActive").properties.fillOpacity=0;var o=new am4core.Circle;o.radius=8,o.fillOpacity=.3,o.fill=v,o.strokeOpacity=0,o.valign="middle",o.marginRight=5,a.icon=o,a.dummyData=e;var i=o.states.create("active");return i.properties.fill=t,i.properties.fillOpacity=.5,a.events.on("hit",be),a}function be(e){Ce(e.target.dummyData)}function Ce(e){o=e,i=e,"deaths"!=e&&(i+=" cases"),N.mapImages.template.tooltipText="[bold]{name}: {value}[/] [font-size:10px]\n"+i;var t=ge[e];for(var a in t.isActive=!0,ge)ge[a]!=t&&(ge[a].isActive=!1);if(N.dataFields.value=e,R.dataFields.value=e+"PC",N.dataItems.each(function(e){e.setValue("value",e.dataContext[o])}),R.dataItems.each(function(e){e.setValue("value",e.dataContext[o+"PC"]),e.mapPolygon.defaultState.properties.fill=void 0}),N.mapImages.template.fill=f[e],N.mapImages.template.stroke=f[e],N.mapImages.template.children.getIndex(0).fill=f[e],oe.tooltip.background.fill=f[e],oe.tooltip.background.stroke=f[e],ae.cursor.lineX.stroke=f[e],ne.isActive){var r=pe[e];for(var a in r.show(),pe)pe[a]!=r&&pe[a].hide()}else{r=me[e];for(var a in r.show(),me)me[a]!=r&&me[a].hide()}N.heatRules.getIndex(0).maxValue=L[o],R.heatRules.getIndex(0).maxValue=A[o],x&&(R.heatRules.getIndex(0).max=f[e],Ge())}function ye(o){if(Ae(),R.hideTooltip(),t==o)return t.isActive=!1,t=void 0,void Oe();t=o;var i=I[o.dataItem.id];b=o.dataItem.dataContext.name,R.mapPolygons.each(function(e){e.isActive=!1}),a&&clearTimeout(a),a=setTimeout(function(){!function(t){for(var a=0;a<ae.data.length;a++){var o=covid_world_timeline[a].list,i=o[t],r=ae.data[a];i?(r.recovered=i.recovered,r.confirmed=i.confirmed,r.deaths=i.deaths,r.active=i.confirmed-i.recovered-i.deaths,ie.min=void 0,ie.max=void 0):(r.recovered=0,r.confirmed=0,r.deaths=0,r.active=0,ie.min=0,ie.max=10)}ae.invalidateRawData(),Pe(e),setTimeout(xe,1e3)}(i)},1e3),Pe(e),Te(),o.isActive=!0,V.isActive?1!=B.zoomLevel?(B.goHome(),Se(o)):Se(o):B.zoomToMapObject(o,we(o))}function xe(){var e=oe.dateToPosition(y);e=oe.toGlobalPosition(e);var t=oe.positionToCoordinate(e);ae.cursor.triggerMove({x:t,y:0},"soft",!0),ae.series.each(function(e){e.isHidden||(e.tooltip.disabled=!1,e.showTooltipAtDataItem(e.tooltipDataItem))})}function Ie(e){if(Ae(),e){e.isHover=!0;var t=N.getImageById(e.dataItem.id);t&&(t.dataItem.dataContext.name=e.dataItem.dataContext.name,t.isHover=!0)}}function ke(e){var t=N.getImageById(e.dataItem.id);Ae(),t&&(t.isHover=!1)}function Se(e){R.hideTooltip(),B.animate([{property:"deltaLongitude",to:-e.visualLongitude},{property:"deltaLatitude",to:-e.visualLatitude}],1e3).events.on("animationended",function(){B.zoomToMapObject(e,we(e))})}function we(e){var t=e.polygon.bbox.width,a=e.polygon.bbox.width;return Math.min(B.seriesWidth/(2*t),B.seriesHeight/(2*a))}function Oe(){b="World",t=void 0,Ae(),a&&clearTimeout(a),R.mapPolygons.each(function(e){e.isActive=!1}),Te();for(var o=0;o<ae.data.length;o++){var i=covid_total_timeline[o],r=ae.data[o];r.recovered=i.recovered,r.confirmed=i.confirmed,r.deaths=i.deaths,r.active=i.confirmed-i.recovered,ie.min=void 0,ie.max=void 0}ae.invalidateRawData(),Pe(e),B.goHome()}function Te(){Y.text=b+", "+B.dateFormatter.format(y,"MMM dd, yyyy")}function Pe(t){if(!isNaN(t)){var a=covid_total_timeline[t],o=new Date(a.date);y=o,Te();var i=oe.dateToPosition(o);i=oe.toGlobalPosition(i);var r=oe.positionToCoordinate(i);for(var l in ae.cursor&&ae.cursor.triggerMove({x:r,y:0},"soft",!0),ge){var d=Number(ae.data[t][l]);isNaN(d)||(ge[l].label.text=Le(l)+": "+n.format(d,"#,###"))}e=t}}function Le(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Ae(){R.mapPolygons.each(function(e){e.isHover=!1}),N.mapImages.each(function(e){e.isHover=!1})}function Ge(){R.mapPolygons.template.tooltipText="[bold]{name}: {value.formatNumber('#.')}[/]\n[font-size:10px]"+i+" per million"}M.events.on("layoutvalidated",function(){oe.tooltip.hide(),ae.cursor.hide(),Pe(e)}),Te(),Ce("active"),setTimeout(xe,3e3);var Me={AD:"84000",AE:"4975593",AF:"29121286",AG:"86754",AI:"13254",AL:"2986952",AM:"2968000",AN:"300000",AO:"13068161",AQ:"0",AR:"41343201",AS:"57881",AT:"8205000",AU:"21515754",AW:"71566",AX:"26711",AZ:"8303512",BA:"4590000",BB:"285653",BD:"156118464",BE:"10403000",BF:"16241811",BG:"7148785",BH:"738004",BI:"9863117",BJ:"9056010",BL:"8450",BM:"65365",BN:"395027",BO:"9947418",BQ:"18012",BR:"201103330",BS:"301790",BT:"699847",BV:"0",BW:"2029307",BY:"9685000",BZ:"314522",CA:"33679000",CC:"628",CD:"70916439",CF:"4844927",CG:"3039126",CH:"7581000",CI:"21058798",CK:"21388",CL:"16746491",CM:"19294149",CN:"1330044000",CO:"47790000",CR:"4516220",CS:"10829175",CU:"11423000",CV:"508659",CW:"141766",CX:"1500",CY:"1102677",CZ:"10476000",DE:"81802257",DJ:"740528",DK:"5484000",DM:"72813",DO:"9823821",DZ:"34586184",EC:"14790608",EE:"1291170",EG:"80471869",EH:"273008",ER:"5792984",ES:"46505963",ET:"88013491",FI:"5244000",FJ:"875983",FK:"2638",FM:"107708",FO:"48228",FR:"64768389",GA:"1545255",GB:"62348447",GD:"107818",GE:"4630000",GF:"195506",GG:"65228",GH:"24339838",GI:"27884",GL:"56375",GM:"1593256",GN:"10324025",GP:"443000",GQ:"1014999",GR:"11000000",GS:"30",GT:"13550440",GU:"159358",GW:"1565126",GY:"748486",HK:"6898686",HM:"0",HN:"7989415",HR:"4284889",HT:"9648924",HU:"9982000",ID:"242968342",IE:"4622917",IL:"7353985",IM:"75049",IN:"1173108018",IO:"4000",IQ:"29671605",IR:"76923300",IS:"308910",IT:"60340328",JE:"90812",JM:"2847232",JO:"6407085",JP:"127288000",KE:"40046566",KG:"5776500",KH:"14453680",KI:"92533",KM:"773407",KN:"51134",KP:"22912177",KR:"48422644",KW:"2789132",KY:"44270",KZ:"15340000",LA:"6368162",LB:"4125247",LC:"160922",LI:"35000",LK:"21513990",LR:"3685076",LS:"1919552",LT:"2944459",LU:"497538",LV:"2217969",LY:"6461454",MA:"33848242",MC:"32965",MD:"4324000",ME:"666730",MF:"35925",MG:"21281844",MH:"65859",MK:"2062294",ML:"13796354",MM:"53414374",MN:"3086918",MO:"449198",MP:"53883",MQ:"432900",MR:"3205060",MS:"9341",MT:"403000",MU:"1294104",MV:"395650",MW:"15447500",MX:"112468855",MY:"28274729",MZ:"22061451",NA:"2128471",NC:"216494",NE:"15878271",NF:"1828",NG:"154000000",NI:"5995928",NL:"16645000",NO:"5009150",NP:"28951852",NR:"10065",NU:"2166",NZ:"4252277",OM:"2967717",PA:"3410676",PE:"29907003",PF:"270485",PG:"6064515",PH:"99900177",PK:"184404791",PL:"38500000",PM:"7012",PN:"46",PR:"3916632",PS:"3800000",PT:"10676000",PW:"19907",PY:"6375830",QA:"840926",RE:"776948",RO:"21959278",RS:"7344847",RU:"140702000",RW:"11055976",SA:"25731776",SB:"559198",SC:"88340",SD:"35000000",SE:"9828655",SG:"4701069",SH:"7460",SI:"2007000",SJ:"2550",SK:"5455000",SL:"5245695",SM:"31477",SN:"12323252",SO:"10112453",SR:"492829",SS:"8260490",ST:"175808",SV:"6052064",SX:"37429",SY:"22198110",SZ:"1354051",TC:"20556",TD:"10543464",TF:"140",TG:"6587239",TH:"67089500",TJ:"7487489",TK:"1466",TL:"1154625",TM:"4940916",TN:"10589025",TO:"122580",TR:"77804122",TT:"1228691",TV:"10472",TW:"22894384",TZ:"41892895",UA:"45415596",UG:"33398682",UM:"0",US:"310232863",UY:"3477000",UZ:"27865738",VA:"921",VC:"104217",VE:"27223228",VG:"21730",VI:"108708",VN:"89571130",VU:"221552",WF:"16025",WS:"192001",XK:"1800000",YE:"23495361",YT:"159042",ZA:"49000000",ZM:"13460305",ZW:"13061000"}})});